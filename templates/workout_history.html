<!DOCTYPE html> <!--Informs the browser that the page is an HTML5 document-->
<html lang = "en"> <!--Specifies the content is in english improving accessibily-->
    <head> <!--Contains metadata-->
        <meta charset="UTF-8"> <!--Informs the browser how to interpret characters supporting various letter, symbols and accents-->
        <title>Workout History</title> <!--Name of browser tab-->
    </head>
    <body> <!--What the user sees/interacts with-->
        {% with messages = get_flashed_messages() %} <!--Retrives the message created with flash-->
            {% if messages %} <!--If the message exists, it's shown with green text-->
                <ul style="color: green;"> 
                    {% for message in messages %} <!--Creates a for loop that keeps showing messages when the PWA is run-->
                        <li>{{ message }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        {% endwith %}
        <h2>Your Workout History</h2> <!--Informs the user on the feature-->
        {%if workouts %} <!--If the user has logs, it shows a table, otherwise it informs the user that there are no workouts tracked-->
            <table border="1" cellpadding = "5"> <!--Creates a table with a border and cell spacing-->
                <tr>
                    <!--Table Headers-->
                    <th>Date</th> 
                    <th>Exercise</th>
                    <th>Sets</th>
                    <th>Reps</th>
                    <th>Weight</th>
                    <th>Actions</th>
                </tr>
            {% for workout in workouts %} <!--A loop that goes over each workout object from the database to display them 1 row at a time-->
            <tr>
                <!--Table rows that retrieve data from a particular database-->
                <td>{{ workout.workout_date}}</td> 
                <td>{{ workout.exercise}}</td>
                <td>{{ workout.sets }}</td>
                <td>{{ workout.reps }}</td>
                <td>{{ workout.weight }}</td>
                <td>
                    <a href="{{ url_for('edit_workout', workout_id = workout.id) }}">Edit</a> <!--Allows the user to edit the data-->
                    <form action = "{{ url_for('delete_workout', workout_id = workout.id) }}" method = "POST" style = "display:inline;"> <!--Allows the user to delete the data. Inline styling keeps button next to edit-->
                        <button type = "submit">Delete</button> <!--Delete button-->
                    </form>
                </td>
            </tr>
            {% endfor %} <!--Ends the loop-->
            </table>
        {% else %}
            <p>No workouts logged</p>
        {% endif %} <!--Ends the if statement-->
        <br>
        <hr> <!--Role based UI that allows the user to go back to their respective dashboard-->
        {% if session.role == "gym_goer" %}
            <a href="{{ url_for('gym_goer_dashboard') }}">Back to Dashboard</a>
        {% else %}
            <a href="{{ url_for('personal_trainer_dashboard') }}">Back to Dashboard</a>
        {% endif %}
        <a href="/">Back to Home</a> <!--Allows user to go back to the home page-->
    </body>
</html>